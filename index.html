<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Another Product Invented â€“ Pente Grammai</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #fff;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      margin: 1rem 0 0.5rem;
      text-align: center;
      line-height: 1.2;
    }
    #gameContainer {
      position: relative;
      width: 500px;
      max-width: 100%;
      margin-bottom: 10px;
    }
    canvas {
      display: block;
      background: #eee;
      width: 100%;
      height: auto;
      border: 2px solid #333;
      touch-action: none;
    }
    .overlayScreen {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255,255,255,0.95);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      z-index: 10;
    }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
    }
    #logo {
      position: fixed;
      bottom: 10px;
      right: 10px;
      max-width: 100px;
      z-index: 2000;
    }
  </style>
</head>
<body>

  <h1>Another Product Invented<br>Pente Grammai</h1>

  <div id="gameContainer">
    <canvas id="gameCanvas" width="500" height="500"></canvas>

    <!-- Menu Screen -->
    <div id="menuScreen" class="overlayScreen" style="display:flex;">
      <button id="newGameBtn">New Game</button>
      <button id="instructionsBtn">Instructions</button>
    </div>

    <!-- Difficulty Screen -->
    <div id="difficultyScreen" class="overlayScreen">
      <p>Select Difficulty:</p>
      <button id="easyBtn">Easy</button>
      <button id="mediumBtn">Medium</button>
      <button id="hardBtn">Hard</button>
    </div>

    <!-- Instructions Screen -->
    <div id="instructionsScreen" class="overlayScreen">
      <h2>How to Play Pente Grammai</h2>
      <p>1. All pieces start on the middle line, with you on one side and the AI on the other.</p>
      <p>2. Roll the die to move your pieces anti-clockwise.</p>
      <p>3. Move your pieces to the opposite third line to win.</p>
      <p>4. You cannot land on a space occupied by another piece.</p>
      <p>5. If your dice roll would land you on a blocked space, you must choose another piece to move (if possible).</p>
      <p>6. Pieces cannot enter home if any of your pieces are still in the starting third line.</p>
      <p><strong>Press [M] to return to the Main Menu.</strong></p>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="overlayScreen">
      <h2 id="resultText"></h2>
      <button id="gameOverNewGame">New Game</button>
      <p><strong>Press [M] to return to the Main Menu.</strong></p>
    </div>
  </div>

  <img id="logo" src="logo.png" alt="Logo">

  <script>
    // Game Logic
    let canvas = document.getElementById('gameCanvas'),
        ctx = canvas.getContext('2d'),
        board = [], // 5x5 grid
        playerPieces = [], // Player's pieces
        aiPieces = [], // AI's pieces
        currentPlayer = 'player', // Player starts first
        gameActive = false,
        difficulty = 'easy';

    // Initialize the board
    function initializeBoard() {
      board = Array.from({ length: 5 }, () => Array(5).fill(null));
      playerPieces = [{ x: 2, y: 0 }, { x: 2, y: 1 }, { x: 2, y: 2 }]; // Starting positions
      aiPieces = [{ x: 2, y: 4 }, { x: 2, y: 3 }, { x: 2, y: 2 }]; // Starting positions
      currentPlayer = 'player';
      gameActive = true;
      drawBoard();
    }

    // Draw the board and pieces
    function drawBoard() {
      ctx.clearRect(0, 0, 500, 500);
      ctx.strokeStyle = "#000";
      ctx.lineWidth = 3;

      // Draw grid lines
      for (let i = 1; i < 5; i++) {
        ctx.beginPath();
        ctx.moveTo(i * 100, 0);
        ctx.lineTo(i * 100, 500);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(0, i * 100);
        ctx.lineTo(500, i * 100);
        ctx.stroke();
      }

      // Draw player pieces
      playerPieces.forEach(piece => {
        ctx.fillStyle = 'blue';
        ctx.beginPath();
        ctx.arc(piece.x * 100 + 50, piece.y * 100 + 50, 40, 0, Math.PI * 2);
        ctx.fill();
      });

      // Draw AI pieces
      aiPieces.forEach(piece => {
        ctx.fillStyle = 'red';
        ctx.beginPath();
        ctx.arc(piece.x * 100 + 50, piece.y * 100 + 50, 40, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    // Roll the die (1-6)
    function rollDie() {
      return Math.floor(Math.random() * 6) + 1;
    }

    // Handle player move
    function playerMove() {
      const dieResult = rollDie();
      alert(`You rolled a ${dieResult}. Move your piece!`);
      // Implement movement logic here based on your rules
    }

    // Handle AI move
    function aiMove() {
      const dieResult = rollDie();
      console.log(`AI rolled a ${dieResult}.`);
      // Implement AI movement logic here based on difficulty
    }

    // Check for win condition
    function checkWin() {
      // Implement win condition logic here
    }

    // Event Listeners
    document.getElementById('newGameBtn').onclick = () => {
      showScreen('difficultyScreen');
      initializeBoard();
    };
    document.getElementById('instructionsBtn').onclick = () => showScreen('instructionsScreen');
    document.getElementById('easyBtn').onclick = () => { difficulty = 'easy'; initializeBoard(); };
    document.getElementById('mediumBtn').onclick = () => { difficulty = 'medium'; initializeBoard(); };
    document.getElementById('hardBtn').onclick = () => { difficulty = 'hard'; initializeBoard(); };
    document.getElementById('gameOverNewGame').onclick = () => showScreen('menuScreen');

    // Show/hide screens
    function showScreen(id) {
      document.querySelectorAll('.overlayScreen').forEach(s => s.style.display = 'none');
      if (id) document.getElementById(id).style.display = 'flex';
    }

    // Keyboard shortcut to return to menu
    document.addEventListener('keydown', e => {
      if (e.key.toLowerCase() === 'm') showScreen('menuScreen');
    });

    // Start with the menu screen
    showScreen('menuScreen');
  </script>
</body>
</html>
